# 内存池项目 (Memory Pool v1)


## 1. 项目概述
本项目是一个C++内存池实现项目（Memory Pool v1），v1版本代表这是内存池系列中最基础且易于理解的实现之一。作为个人学习项目，主要目标包括：
- 通过实际项目开发加深对C++语法特性的掌握和运用能力
- 深入理解C++内存管理机制及其性能开销，提升内存分配效率的认知

### 1.1 项目背景与动机

- **内存碎片问题分析**: 传统动态内存分配(malloc/new)在频繁申请释放小内存块时会产生大量内存碎片
- **性能瓶颈**: 系统调用开销大，内存分配效率低，影响程序整体性能
- **应用场景**: 高并发服务器、游戏引擎、嵌入式系统等对内存分配性能要求高的场景

### 1.2 技术原理
- **内存池核心思想**: 预先分配大块内存，内部管理小块内存的分配与回收
- **减少系统调用**: 通过批量预分配减少与操作系统的交互次数
- **碎片控制**: 通过固定大小块或分级策略减少内存碎片
- **缓存友好**: 连续内存分配提高CPU缓存命中率

### 1.3 设计目标
- **高性能**: 比标准malloc/free更快的分配释放速度
- **低碎片**: 有效控制内存碎片，提高内存利用率
- **线程安全**: 支持多线程环境下的并发访问
- **可扩展**: 支持不同大小的内存块分配策略

## 2. 环境配置与依赖
### 2.1 开发环境
- **编译器**: G++/Clang/MSVC (支持 C++11 及以上标准)
- **构建工具**: CMake 3.10+
- **平台支持**: Linux/Windows/macOS

### 2.2 第三方依赖
- 无外部依赖 (纯C++实现)
- 标准库: `<mutex>`, `<thread>` (C++11)
- 可选: benchmark库用于性能对比测试

## 2.3 快速开始

### Windows 用户（推荐）
```bash
# 双击运行自动化脚本
build.bat

# 或使用命令行
mkdir build && cd build
cmake ..
cmake --build .
.\bin\test_memory_pool.exe
```

### Linux/macOS 用户
```bash
# 使用自动化脚本
chmod +x build.sh
./build.sh

# 或使用命令行
mkdir -p build && cd build
cmake .. -DCMAKE_BUILD_TYPE=Release
cmake --build . -j$(nproc)
./bin/test_memory_pool
```

详细编译说明请参考 [BUILD.md](BUILD.md)

## 3. 架构设计与核心模块
### 3.1 整体架构












所有的内存池本质上都在做同一件事:预先向系统申请一大片内存，并交由应用层管理，在程运行时，内存的分配和回收都由应用层的内存池处理，从而减少系统调用。

基于哈希映射的多种定长内存分配器

静态成员函数作用：让这些函数不依赖于任何特定对象实例。

单例模式：确保一个类在整个程序运行期间，只有一个实例（对象）存在，并为这个唯一的实例提供一个全局统一的访问点。
要实现一个单例模式，通常需要满足三个条件：
- 私有的构造函数 (Private Constructor)
- 一个私有的、静态的类成员指针/对象。静态成员变量用来持有那个“唯一”的实例
- 一个公有的、静态的访问方法。实例，并将其保存在静态成员变量中